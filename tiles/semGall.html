<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semester Galerie Orbti</title>



    <script>
        $(document).ready(function(){
            $.getJSON("gallery.json.php").done(function(semester_list){
                var list = $("select.semester_list");
                var keys = Object.keys(semester_list);
                for(var i = 0; i < keys.length; i++) {
                    var key = keys[i];
                    var name = semester_list[key];
                    $("<option>").text(name).attr("key", key).appendTo(list);
                }
            });

            $("select.semester_list").on("change", function(){
                var key = $('option:selected', this).attr('key');
                $.getJSON("gallery.json.php?semester=" + encodeURIComponent(key)).done(function(gallery){
                    var list = $("ul.orbit-container").empty();
                    var keys = Object.keys(gallery);
                    for(var i = 0; i < keys.length; i++) {
                        var name = keys[i];
                        var image_url = gallery[name];

                        if(i == 0){
                            $("<li>").attr("class", "is-active orbit-slide")
                                .append($("<img class='orbit-image'>").attr("src", "gallery.json.php?image=" + encodeURIComponent(image_url)))
                                .append($('<figcaption class="orbit-caption">').text(name))
                                .appendTo(list);
                        } else {


                        $("<li>").attr("class", "orbit-slide")
                            .append($("<img class='orbit-image'>").attr("src", "gallery.json.php?image=" + encodeURIComponent(image_url)))
                            .append($('<figcaption class="orbit-caption">').text(name))
                            .appendTo(list);
                    }}
                    var orbit = $('div.orbit');
                    $('<button>').attr("class", "orbit-previous")
                        .append($('<span>').attr("class", "show-for-sr").text("<"))
                        .appendTo(orbit);
                    $('<button>').attr("class", "orbit-next")
                        .append($('<span>').attr("class", "show-for-sr").text(">"))
                        .appendTo(orbit);
                });
            });
        });
    </script>
  </head>

  <body>

    <div class="orbit" role="region" data-orbit>
      <ul class="orbit-container">

        <li>
          <img src=" ieuhfiehf">
        </li>
        wFHbfnwj
        efiuhiuaesfh
        ejhfbIAEUsbf
        eijfuhiwefuh
      </ul>
      <!-- <button class="orbit-previous"><span class="show-for-sr">Previous Slide</span>&#9664;&#xFE0E;</button> -->
     <!-- <button class="orbit-next"><span class="show-for-sr">Next Slide</span>&#9654;&#xFE0E;</button> -->

    </div>

    <select class="semester_list" style="margin-top: 80%">
    </select>

  </body>
</html>
