<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8">
	<title>HdM Sammelkrake</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<script src="jquery-1.7.2.min.js"></script>
	<script>
		$(document).ready(function(){
			/*
			var grabbed_elem;
			var x, y;
			$('h2').mousedown(function(){
				grabbed_elem = $(this).closest('article');
			}).mouseup(function(){
				grabbed_elem = undefined;
				x = undefined;
				y = undefined;
			}).mousemove(function(event){
				if (!grabbed_elem)
					return true;
				if (!!x && !!y) {
					var dx = event.pageX - x, dy = event.pageY - y;
					var pos = grabbed_elem.position();
					grabbed_elem.css({
						left: pos.left + dx + 'px',
						top: pos.top + dy + 'px'
					});
				}
				x = event.pageX;
				y = event.pageY;
				return false;
			});
			*/
			
			var cell_width = 150, cell_height = 200;
			var grid_width = 6, grid_height = 4;
			var grid = new Array(grid_width * grid_height);
			
			function grid_set(x, y, val){
				if (x < 0 || x > grid_width - 1 || y < 0 || y > grid_height - 1)
					return;
					//throw ['Index out of bounds, x: ', x, ' y: ', y].join('');
				grid[y * grid_width + x] = val;
			}
			
			function grid_get(x, y){
				if (x < 0 || x > grid_width - 1 || y < 0 || y > grid_height - 1)
					return undefined;
					//throw ['Index out of bounds, x: ', x, ' y: ', y].join('');
				return grid[y * grid_width + x];
			}
			
			function grid_increment_at(x, y, weight){
				var old_val = grid_get(x, y);
				if ( typeof old_val == 'undefined' )
					grid_set(x, y, weight);
				else if ( typeof old_val == 'number' )
					grid_set(x, y, old_val + weight);
			}
			
			function insert(width, height, id){
				if ( grid_get(0, 0) == undefined ) {
					var coords = check_around_coords(0, 0, width, height);
					erode(0, 0, width, height);
					for(ix = 0; ix < width; ix++)
						for(iy = 0; iy < height; iy++)
							grid_set(coords.x + ix, coords.y + iy, id);
					return {x: 0, y: 0};
				} else {
					var sorted_grid = [];
					for(var i = 0; i < grid.length; i++)
						sorted_grid.push({x: i % grid_width, y: Math.floor(i / grid_width), val: grid[i]});
					
					sorted_grid.sort(function(a, b){
						if (typeof a.val == 'number') {
							if (typeof b.val == 'number')
								return (a.val == b.val) ? 0 : ( (a.val < b.val) ? -1 : 1 );
							else
								return -1;
						} else {
							return (typeof b.val == 'number') ? 1 : 0;
						}
					});
					
					for(var i = 0; i < sorted_grid.length; i++){
						var coords = check_around_coords(sorted_grid[i].x, sorted_grid[i].y, width, height);
						if (coords != false){
							erode(coords.x, coords.y, width, height);
							for(ix = 0; ix < width; ix++)
								for(iy = 0; iy < height; iy++)
									grid_set(coords.x + ix, coords.y + iy, id);
							return {x: coords.x, y: coords.y};
						}
					}
				}
			}
			
			function check_around_coords(x, y, w, h){
				var check_rect = function(x1, y1, x2, y2){
					for(var x = x1; x <= x2; x++){
						for(var y = y1; y <= y2; y++){
							if ( typeof grid_get(x, y) == 'object' )
								return false;
						}
					}
					return true;
				};
				
				var dx = w-1, dy = h-1;
				if ( check_rect(x, y, x+dx, y+dy) )
					return {x: x, y: y};
				else if ( check_rect(x-dx, y, x, y+dy) )
					return {x: x-dx, y: y};
				else if ( check_rect(x-dx, y-dy, x, y) )
					return {x: x-dx, y: y-dy};
				else if ( check_rect(x, y-dy, x+dx, y) )
					return {x: x, y: y-dy};
				return false;
			}
			
			function erode(x, y, w, h){
				var weights = { edge: 0.25, left: 1, right: 1, top: 0.5, bottom: 0.5 };
				grid_increment_at(x - 1, y - 1, weights.edge);
				grid_increment_at(x + w, y - 1, weights.edge);
				grid_increment_at(x + w, y + h, weights.edge);
				grid_increment_at(x - 1, y + h, weights.edge);
				
				for(var i = x; i < x + w; i++){
					grid_increment_at(i, y - 1, weights.top);
					grid_increment_at(i, y + h, weights.bottom);
				}
				
				for(var i = y; i < y + h; i++){
					grid_increment_at(x - 1, i, weights.left);
					grid_increment_at(x + w, i, weights.right);
				}
			}
			
			$('section').css({width: grid_width * cell_width + 'px', height: grid_height * cell_height + 'px' }).
			find('> article').each(function(){
				var w = $(this).data('width'), h = $(this).data('height');
				var coords = insert(w, h, $(this).attr('id'));
				$(this).css({
					display: 'block',
					left: coords.x * cell_width + 'px',
					top: coords.y * cell_height + 'px',
					width: w * cell_width + 'px',
					height: h * cell_height + 'px'
				});
			});
		});
	</script>
</head>
<body>

<header>
	<h1><a href="/">HdM Sammelkrake</a></h1>
	<p>Eine kleine Karte der Informationsquellen rund um die HdM</p>
</header>

<section>
	<article id="official-news" class="official" data-width="2" data-height="1">
		<h2>Offizielle News</h2>
		<ul>
			<li><a href="#" title="Am 19.6 14:46 Uhr von Kerstin Lauer">Ansprechpartner/in gesucht</a></li>
			<li><a href="#" title="Am 19.6 14:19 Uhr von sm125@hdm-stuttgart.de">Unterstützung Studioproduktion Film SS12</a></li>
			<li><a href="#" title="Am 19.6 11:09 Uhr von Michael Wolf">Social Media: Die Novellierung der Personalbeschaffung im Web 2.0</a></li>
			<li><a href="#" title="Am 18.6 18:13 Uhr von Bjoern von Prollius">Infoveranstaltung Hauptstudium SS12</a></li>
			<li><a href="#" title="Am 18.6 15:33 Uhr von Prof. Walter Kriha">Geplanter Vortrag von Herrn Kampe fällt aus</a></li>
			<li><a href="#" title="Am 14.6 8:43 Uhr von Prof.Dr.-Ing.Oliver Kretzschmar">Firma Bassier, Bergmann und Kindler in Ludwigsburg suchen einen Praktikant Project Management ...</a></li>
		</ul>
		<ul>
			<li><a href="#">HdM Mails <small title="3 ungelesene Nachrichten">3</small></a></li>
			<li><a href="#">Newsgroups <small title="2 ungelesene Nachrichten">2</small></a></li>
			<li><a href="#">Meldungen aus dem Persönlichen Stundenplan <small title="1 Meldung seit letzter Vorlesung">1</small></a></li>
		</ul>
	</article>
	
	<article id="official-infos" class="official" data-width="2" data-height="1">
		<h2>Offizielle Infos</h2>
		<ul>
			<li><a href="#">MI-Wiki</a> <small>Infos zum Studium, Vorlesungen und HowTos (z.B. VPN)</small></li>
			<li><a href="#">Skripte-Server</a> <small>Skripte und Daten zu Vorlesungen</small></li>
			<li><a href="#">SB-Funktion</a> <small>Deine Notenliste und Prüfungsanmeldung</small></li>
			<li><a href="#">Semestergalerie</a> <small>Bilder und Namen von deinem Semester</small></li>
			<li><a href="#">Software-Tools</a> <small>MSDNAA, IDEs, ISO-Images und weitere Downloads</small></li>
		</ul>
	</article>
	
	<article id="schedule" class="official" data-width="4" data-height="2">
		<h2>Stundenplan für diese Woche</h2>
		<table>
			<tr>
				<th></th>
				<th>Montag</th>
				<th>Dienstag</th>
				<th>Mittwoch</th>
				<th>Donnerstag</th>
				<th>Freitag</th>
				<th>Samstag</th>
			</tr>
			<tr>
				<th>8:15</th>
				<td></td>
				<td></td>
				<td><a href="#">Internet Traffic, Performance and Content Distribution/W</a> <small>in 136</small></td>
				<td><a href="#">Multimedia Codecs/W</a> <small>verlegt nach 137</small></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<th>10:00</th>
				<td></td>
				<td></td>
				<td></td>
				<td><a href="#">Multimedia Codecs/W</a> <small>in 135</small></td>
				<td></td>
				<td><a href="#">Entwicklung von Rich Media Systemen/W</a> <small>in 141</small></td>
			</tr>
			<tr>
				<th>11:45</th>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td><a href="#">Entwicklung von Rich Media Systemen/W</a> <small>in 141</small></td>
			</tr>
			<tr>
				<th>13:15</th>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<th>14:15</th>
				<td></td>
				<td><a href="#">Management vernetzter Computer/W</a> <small>in 137</small></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<th>16:00</th>
				<td></td>
				<td><a href="#">Management vernetzter Computer/W</a> <small>in 137</small></td>
				<td><a href="#">Sichere Systeme/W</a> <small>in P03 <span class="count" title="1 Nachricht zu dieser Vorlesung seit letzter Vorlesung">1</span></small></a></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<th>17:45</th>
				<td></td>
				<td></td>
				<td><a href="#">Sichere Systeme/W</a> <small>in P03 <span class="count" title="1 Nachricht zu dieser Vorlesung seit letzter Vorlesung">1</span></small></a></td>
				<td><a href="#">Design und Implementation fortgeschrittener Programmiersprachen/W</a> <small>in 137</small></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<th>19:30</th>
				<td></td>
				<td></td>
				<td></td>
				<td><a href="#">Design und Implementation fortgeschrittener Programmiersprachen/W</a> <small>in 137</small></td>
				<td></td>
				<td></td>
			</tr>
		</table>
	</article>
	
	<article id="project-activities" data-width="2" data-height="1">
		<h2>Projekte (Redmine)</h2>
		<dl>
			<dt><a href="#" title="Aktivitäten im Projekt Design u. Impl. v. Progspr.">Design u. Impl. v. Progspr. <span title="3 Aktivitäten diese Woche">3</span></a></dt>
				<dd><a href="#" title="Am 27.05.2012 11:30 Uhr von Markus Rapp">Wiki-Bearbeitung: Hauptseite (#84)</a></dd>
				<dd><a href="#" title="Am 24.05.2012 21:01 Uhr von Markus Rapp">HDM-LISP_interface-2012_05_24.st</a></dd>
				<dd><a href="#" title="Am 27.05.2012 11:30 Uhr von Markus Rapp">Wiki-Bearbeitung: Hauptseite (#84)</a></dd>
				<dd><a href="#" title="Am 24.05.2012 21:01 Uhr von Markus Rapp">HDM-LISP_interface-2012_05_24.st</a></dd>
			<dt><a href="#" title="Aktivitäten im Projekt Design u. Impl. v. Progspr.">Design u. Impl. v. Progspr. <span title="2 Aktivitäten diese Woche">2</span></a></dt>
				<dd><a href="#" title="Am 27.05.2012 11:30 Uhr von Markus Rapp">Wiki-Bearbeitung: Hauptseite (#84)</a></dd>
				<dd><a href="#" title="Am 24.05.2012 21:01 Uhr von Markus Rapp">HDM-LISP_interface-2012_05_24.st</a></dd>
		</dl>
	</article>
	
	<article id="students-stuff" data-width="2" data-height="1">
		<h2>Von Studenten für Studenten</h2>
		<ul>
			<li><a href="#">Klaus</a> <small>Klausurenarchiv</small></li>
			<li><a href="#">HdM-Wiki</a></li>
			<li>HdM Facebook-Gruppen: <a href="#">WS 2011/2012</a>, <a href="#">SS 2012</a></li>
		</ul>
	</article>
	
	<article id="messi" data-width="2" data-height="1">
		<h2>Messi</h2>
		<dl>
			<dt>HdM Mitarbeiter (2 online)</dt>
				<dd class="online">Andreas Stiegler</dd>
				<dd class="away">Christoph Lindenmüller</dd>
			<dt>Wintersemester 2008/2009 (3 online)</dt>
				<dd class="online">Anna Regner</dd>
				<dd class="online">Markus Schleehauf</dd>
				<dd class="away">Nils Beyrle</dd>
		</dl>
	</article>
	
	<article id="events" data-width="2" data-height="1">
		<h2>Events</h2>
		<ul>
			<li><a href="#">MI-Wiki</a> <small>Infos zum Studium, Vorlesungen und HowTos (z.B. VPN)</small></li>
			<li><a href="#">Skripte-Server</a> <small>Skripte und Daten zu Vorlesungen</small></li>
			<li><a href="#">SB-Funktion</a> <small>Deine Notenliste und Prüfungsanmeldung</small></li>
			<li><a href="#">Semestergalerie</a> <small>Bilder und Namen von deinem Semester</small></li>
			<li><a href="#">Software-Tools</a> <small>MSDNAA, IDEs, ISO-Images und weitere Downloads</small></li>
		</ul>
	</article>
	
	<article id="recordings" data-width="2" data-height="1">
		<h2>Vorträge</h2>
		<ul>
			<li>
				<a href="#">10. GamesDay</a>
				<ul>
					<li><a href="#">Keeping the Balance</a></li>
					<li><a href="#">SAP - Gamification - Motivation, Psycholgy and TwoGo as Example</a></li>
					<li><a href="#">Mobile Engine Development</a></li>
				</ul>
			</li>
			<li>
				<a href="#">IBM-Day</a>
				<ul>
					<li><a href="#">Mobile Enterprise Strategie</a></li>
					<li><a href="#">Prozessverbesserung in der Anwendungsentwicklung - Programmierer lassen sich nicht programmieren</a></li>
					<li><a href="#">Erfordern heute Cloudbasierte Technologien neue Data Center Strukturen?</a></li>
				</ul>
			</li>
		</ul>
	</article>
	
	<article id="publications" data-width="2" data-height="1">
		<h2>Veröffentlichungen</h2>
		<p>Interessante Arbeiten, Projekte und Papers von Studenten</p>
		<ul>
			<li><a href="#">Building Compiled Language Extensions for JavaScript von Jonathan Brachthäuser</a></li>
			<li><a href="#">Architecture and Prototype of a Game-Engine von Andreas Stiegler</a></li>
		</ul>
	</article>
</section>

</body>
</html>